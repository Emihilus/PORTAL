{% extends 'base.html.twig' %}

{% block title %}PDPAPW.PL{% endblock %}

{% block body %}
	<h1>PORTAL DO PRZEPROWADZANIA AUKCJI PIECY WÄ˜DZARNICZYCH</h1>

	{# modal for tasks or notify user is not logged in #}
	{% if app.user %}
    {{ include('parts/include/ht_modal_tasks.twig')  }}
	{% else %}
    {{ include('parts/include/ht_modal_not_logged_in.twig')  }}
	{% endif %}


	<div class="container-fluid">
			
			{{ include('parts/include/ht_filters.html.twig')  }}

		<div id='contener'></div>


	</div>

{% endblock %}



{% block javascripts %}
{{ parent() }}
<script>


{# only dynamic data for getAuctions #}
let GAJArray = {mMode: 0, filters: {
	f_liveness: 1,
	o_orderBy: 'title'
}};
let historyString = '{{path('auction-list')}}/';




function submitFilters()
{
	if($('#input_search').val() != '')
		GAJArray.filters.f_search = $('#input_search').val();
	else
		delete(GAJArray.filters.f_search);

	GAJArray.filters.fo_search = $('#select_searchtype').val();
	GAJArray.filters.f_liveness = $('#select_liveness').val();


	if($('#input_price_s').val() != '')
		GAJArray.filters.f_prices = $('#input_price_s').val();
	else
		delete(GAJArray.filters.f_prices);

	if($('#input_price_e').val() != '')
		GAJArray.filters.f_pricee = $('#input_price_e').val();
	else
		delete(GAJArray.filters.f_pricee);

	if($('#input_byuser').val() != '')
		GAJArray.filters.f_byuser = $('#input_byuser').val();
	else
		delete(GAJArray.filters.f_byuser);

	// sort
	GAJArray.filters.s_criteria = $('#select_criteria').val();
	GAJArray.filters.s_order = $('#select_order').val();

	getAuctions({{app.request.get('page')}});
}



{# modal code #}
{{ include('parts/include/js_modal.twig')  }}

{# getAuctions code #}
{{ include('parts/include/js_getAuctions.twig')  }}


</script>
{% endblock %}