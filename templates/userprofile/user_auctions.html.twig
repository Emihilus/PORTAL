{% extends 'base.html.twig' %}

{% block title %}Auctions of {% if app.request.get('username')%}{{app.request.get('username')}}{% else %}{{app.user}}{% endif %}{{ parent() }}{% endblock %}

{% block body %}

<h1>Auctions of the user {% if app.request.get('username')%}{{app.request.get('username')}}{% else %}{{app.user}}{% endif %}</h1>

{# <h2>Back to dashboard</h2> #}


{# modal for tasks or notify user is not logged in #}
{% if app.user %}
{{ include('parts/include/ht_modal_tasks.twig')  }}
{% else %}
{{ include('parts/include/ht_modal_not_logged_in.twig')  }}
{% endif %}


<div id='list-content' class="container-fluid">


{{ include('parts/include/ht_filters.html.twig')  }}


<div id='contener'></div>


		
</div>
{% endblock %}


{% block javascripts %}
{{ parent() }}
<script>
    
{# modal code #}
{{ include('parts/include/js_modal.twig')  }}

{# the only dynamic data for getAuctions #}
let GAJArray = { mMode: '{{mMode}}'
		{# {% if app.request.get('username') %}, username: '{{app.request.get('username')}}'{% endif %} #}
,filters: {
	f_liveness: 1,
	o_orderBy: 'title'
}};
let historyString = '{{path(app.request.get('_route'),{'username' : app.request.get('username')})}}/';

	{% if mMode < 3 %}
		GAJArray.filters.f_byuser = '{{app.request.get('username')}}';
	{% endif %}

	{% if mMode == 1 %}
		GAJArray.filters.f_liveness = 3;
	{% elseif mMode == 2 %}
		GAJArray.filters.f_liveness = 2;
	{% endif %}


function submitFilters()
{
	if($('#input_search').val() != "")
	{
		GAJArray.filters.f_search = $('#input_search').val();
		GAJArray.filters.fo_search = $('#select_searchtype').val();
	}

	GAJArray.filters.f_liveness = $('#select_liveness').val();


	if($('#input_price_s').val() != '')
		GAJArray.filters.f_prices = $('#input_price_s').val();

	if($('#input_price_e').val() != '')
		GAJArray.filters.f_pricee = $('#input_price_e').val();

	if($('#input_byuser').val() != '')
		GAJArray.filters.f_byuser = $('#input_byuser').val();

	// sort
	GAJArray.filters.s_criteria = $('#select_criteria').val();
	GAJArray.filters.s_order = $('#select_order').val();

	getAuctions({{app.request.get('page')}});
}


{# getAuctions code #}
{{ include('parts/include/js_getAuctions.twig')  }}


</script>
{% endblock %}